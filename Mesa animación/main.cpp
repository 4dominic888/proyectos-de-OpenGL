#include <GL/glut.h>
#include <stdio.h>
#include <functional>
#include <vector>
#include <math.h>

using namespace std;

//TODO: IMPORTANTE:
//! A la hora de ejecutar este codigo, el compilador necesitará de una configuración adicional
//! Esto es debido a que se usan estructuras de datos nuevas de los includes colocados

//* Codeblocks > Settings > Compiler...
//* Select Compiler: GNU GCC Compiler
//* Compiler settings > Compiler Flags > Have g++ follow the C++11 ISO C++ Language Standar [-std=c++11] (activar)

void createPoligon(array<float,3> _RGB, vector<array<float,2>> _puntos){
    for(int i = 0; i < 3; i++) _RGB[i] /=255.0f;
    for(int j = 0; j < _puntos.size(); j++){
        //400 es un valor que sale de la resolución, cambiar a una variable a futur
        //X
        _puntos[j][0] -= 400;
        _puntos[j][0] /= 400;
        //Y
        _puntos[j][1] -= 400;
        _puntos[j][1] *= -1; // El paint su eje y lo tiene invertido
        _puntos[j][1] /= 400;
    }
    glColor3f(_RGB[0],_RGB[1],_RGB[2]); //Establecer el color ya parseado
    glBegin(GL_POLYGON);
        for(auto punto : _puntos){ glVertex2f(punto[0], punto[1]);} //Ingresa los vertices del poligono
    glEnd();
    
}

#pragma region Variables Globales

//                                             Coordenada XY Pixeles    incremento Pixeles    incremento move          Movimiento OpenGL       Left/Right        Down/Up
vector<array<double,2>> infoManzana     = {      {229,271},               {1,1},             {0.005,0.005},                {0,0},              {26,21},          {42,14}};
vector<array<double,2>> infoArbol      = {       {355,236},               {1,1},             {0.005,0.005},                {0,0},              {288,154},        {312,142}};
vector<array<double,2>> infoEstrella   = {       {449,240},               {1,1},             {0.005,0.005},                {0,0},              {150,298},        {462,-10}};
vector<array<double,2>> infoPlatano   = {        {547,263},                {1,1},             {0.005,0.005},               {0,0},              {163,296},         {433,16}};
#pragma endregion

#pragma region Métodos del OpenGL default y agregado

void inicializar()
{
    //BackGround
    float R,G,B;

    R = 243;
    G = 246;
    B = 218;

    //Lambda expresion
    auto ajustarColor = [&]() {
        R/=255.0f;
        G/=255.0f;
        B/=255.0f;
    };
    ajustarColor();

    glClearColor(R, G, B, 1.0f);
}

// La o es para poder ajusta el zoom
void redimensionar(int w, int h){
    int o = 0;
    glViewport(0,0,w,h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-o,o,-o,o,    -1,1);
}

//Función para facilitar  los colores exactos
void coloresExactosFondo(float R, float G, float B, float x, float y){
    glColor3f(R/255.0f, G/255.0f, B/255.0f); glVertex2f(x, y);
}

#pragma endregion

#pragma region Creación de objetos

void dibujadoMesa(){
    //base(parte alta)
    //                               Color RGB                Coordenadas
    //                             ------------    -----------------------------------
    createPoligon( {210,192,168} , {{45,159},  {97,128}, {97,159}}    ); //1
    createPoligon( {240,194,171} , {{128,128}, {97,128}, {97,159}}   ); //2
    createPoligon( {211,186,156} , {{128,128}, {97,159}, {159,159}}  ); //3
    createPoligon( {200,174,149} , {{128,128}, {159,159}, {190,128}} ); //4
    createPoligon( {199,180,150} , {{190,159}, {159,159}, {190,128}} ); //5
    createPoligon( {200,179,150} , {{190,159}, {221,128}, {190,128}} ); //6
    createPoligon( {195,175,140} , {{190,159}, {221,128}, {252,159}} ); //7
    createPoligon( {211,178,147} , {{252,128}, {221,128}, {252,159}} ); //8
    createPoligon( {201,173,149} , {{268,144}, {252,128}, {252,159}} ); //9
    createPoligon( {204,171,140} , {{268,144}, {283,159}, {252,159}} ); //10
    createPoligon( {198,171,141} , {{252,128}, {283,159}, {314,128}} ); //11
    createPoligon( {197,173,137} , {{314,159}, {283,159}, {314,128}} ); //12
    createPoligon( {201,174,144} , {{314,159}, {344,159}, {314,128}} ); //13
    createPoligon( {194,171,139} , {{344,128}, {344,159}, {314,128}} ); //14
    createPoligon( {199,169,133} , {{344,128}, {344,159}, {374,159}} ); //15
    createPoligon( {199,170,138} , {{344,128}, {374,128}, {374,159}} ); //16
    createPoligon( {199,175,139} , {{374,128}, {404,128}, {374,159}} ); //17
    createPoligon( {199,170,138} , {{404,159}, {404,128}, {374,159}} ); //18
    createPoligon( {197,170,140} , {{404,159}, {404,128}, {419,142}} ); //19
    createPoligon( {197,170,140} , {{433,128}, {404,128}, {419,142}} ); //20
    createPoligon( {197,170,140} , {{404,159}, {433,159}, {419,142}} ); //21
    createPoligon( {197,170,140} , {{433,128}, {433,159}, {419,142}} ); //22
    createPoligon( {199,175,141} , {{433,128}, {433,159}, {462,128}} ); //23
    createPoligon( {207,174,139} , {{490,159}, {433,159}, {462,128}} ); //24
    createPoligon( {203,180,148} , {{490,159}, {501,128}, {462,128}} ); //25
    createPoligon( {219,184,142} , {{490,159}, {501,128}, {558,159}} ); //26

    //base(parte media)
    //                           Color RGB                Coordenadas
    //                         ------------    -----------------------------------

    createPoligon( {172,134,95} , {{45,159}, {40,162}, {74,162}}    ); //1
    createPoligon( {165,124,78} , {{45,159}, {97,159}, {74,162}}    ); //2
    createPoligon( {167,123,78} , {{110,162}, {97,159}, {74,162}}   ); //3
    createPoligon( {167,123,78} , {{110,162}, {97,159}, {126,159}}  ); //4
    createPoligon( {167,123,78} , {{110,162}, {145,162}, {126,159}} ); //5
    createPoligon( {167,123,78} , {{159,159}, {145,162}, {126,159}} ); //6
    createPoligon( {167,123,78} , {{159,159}, {145,162}, {178,162}} ); //7
    createPoligon( {167,123,78} , {{159,159}, {190,159}, {178,162}} ); //8
    createPoligon( {167,123,78} , {{213,162}, {190,159}, {178,162}} ); //9
    createPoligon( {167,123,78} , {{213,162}, {190,159}, {227,159}} ); //10
    createPoligon( {167,123,78} , {{213,162}, {249,162}, {227,159}} ); //11
    createPoligon( {167,123,78} , {{252,159}, {249,162}, {227,159}} ); //12
    createPoligon( {167,123,78} , {{252,159}, {249,162}, {268,162}} ); //13
    createPoligon( {167,123,78} , {{252,159}, {283,159}, {268,162}} ); //14
    createPoligon( {167,123,78} , {{285,162}, {283,159}, {268,162}} ); //15
    createPoligon( {167,123,78} , {{285,162}, {283,159}, {314,159}} ); //16
    createPoligon( {167,123,78} , {{285,162}, {321,162}, {314,159}} ); //17
    createPoligon( {167,123,78} , {{332,159}, {321,162}, {314,159}} ); //18
    createPoligon( {167,123,78} , {{332,159}, {321,162}, {337,162}} ); //19
    createPoligon( {167,123,78} , {{332,159}, {344,159}, {337,162}} ); //20
    createPoligon( {167,123,78} , {{363,162}, {344,159}, {337,162}} ); //21
    createPoligon( {167,123,78} , {{363,162}, {344,159}, {374,159}} ); //22
    createPoligon( {167,123,78} , {{363,162}, {394,162}, {374,159}} ); //23
    createPoligon( {167,123,78} , {{404,159}, {394,162}, {374,159}} ); //24
    createPoligon( {167,123,78} , {{404,159}, {394,162}, {418,162}} ); //25
    createPoligon( {167,123,78} , {{404,159}, {433,159}, {418,162}} ); //26
    createPoligon( {167,123,78} , {{452,162}, {433,159}, {418,162}} ); //27
    createPoligon( {167,123,78} , {{452,162}, {433,159}, {469,159}} ); //28
    createPoligon( {167,123,78} , {{452,162}, {483,162}, {469,159}} ); //29
    createPoligon( {167,123,78} , {{490,159}, {483,162}, {469,159}} ); //30
    createPoligon( {167,123,78} , {{490,159}, {483,162}, {507,162}} ); //31
    createPoligon( {167,123,78} , {{490,159}, {525,159}, {507,162}} ); //32
    createPoligon( {167,123,78} , {{539,162}, {525,159}, {507,162}} ); //33
    createPoligon( {167,123,78} , {{539,162}, {525,159}, {558,159}} ); //34
    createPoligon( {167,123,78} , {{539,162}, {558,162}, {558,159}} ); //35

    //base(patas izquierda)
    //                           Color RGB                Coordenadas
    //                         ------------    -----------------------------------

     createPoligon( {129,97,55} , {{40,162}, {74,162}, {40,200}}       ); //1
     createPoligon( {216,187,155} , {{74,234}, {74,162}, {40,200}}     ); //2
     createPoligon( {201,175,140} , {{74,234}, {40,268}, {40,200}}     ); //3
     createPoligon( {211,183,146} , {{74,234}, {40,268}, {74,302}}     ); //4
     createPoligon( {195,166,126} , {{40,336}, {40,268}, {74,302}}     ); //5
     createPoligon( {211,179,141} , {{40,336}, {74,370}, {74,302}}     ); //6
     createPoligon( {180,137,73} , {{40,336}, {74,370}, {40,404}}      ); //7
     createPoligon( {204,172,133} , {{74,438}, {74,370}, {40,404}}     ); //8
     createPoligon( {146,112,61} , {{74,438}, {40,472}, {40,404}}      ); //9
     createPoligon( {205,170,130} , {{74,438}, {40,472}, {74,472}}     ); //10
     createPoligon( {180,139,84} , {{40,162}, {57,181}, {40,200}}      );
     createPoligon( {216,187,155} , {{57,181}, {61,221}, {40,200}}     );
     createPoligon( {183,143,89} , {{40,216}, {61,221}, {40,200}}      );
     createPoligon( {183,143,89} , {{74,234}, {53,255}, {74,265}}      );
     createPoligon( {183,143,89} , {{57,285}, {53,255}, {74,265}}      );

     createPoligon( {147,104,62} , {{92,198}, {119,198}, {119,218}}    ); //12
     createPoligon( {177,145,106} , {{92,198}, {92,218}, {119,218}}    ); //13
     createPoligon( {190,160,126} , {{119,245}, {92,218}, {119,218}}   ); //14
     createPoligon( {192,159,124} , {{119,245}, {92,218}, {92,272}}    ); //15
     createPoligon( {200,168,127} , {{119,245}, {119,299}, {92,272}}   ); //16
     createPoligon( {178,146,105} , {{92,236}, {119,299}, {92,272}}    ); //17
     createPoligon( {179,144,107} , {{92,236}, {119,299}, {119,353}}   ); //18
     createPoligon( {191,156,114} , {{92,236}, {92,380}, {119,353}}    ); //19
     createPoligon( {187,152,110} , {{119,380}, {92,380}, {119,353}}   ); //20


     createPoligon( {195,183,167} , {{74,198}, {78,198}, {74,234}}     );
     createPoligon( {195,183,167} , {{78,238}, {78,198}, {74,234}}     );
     createPoligon( {195,183,167} , {{78,238}, {74,244}, {74,234}}     );
     createPoligon( {195,183,167} , {{78,238}, {74,244}, {78,259}}     );
     createPoligon( {195,183,167} , {{74,302}, {74,244}, {78,259}}     );
     createPoligon( {195,183,167} , {{74,302}, {78,313}, {78,259}}     );
     createPoligon( {195,183,167} , {{74,302}, {78,313}, {74,319}}     );
     createPoligon( {195,183,167} , {{74,333}, {78,313}, {74,319}}     );
     createPoligon( {195,183,167} , {{74,333}, {78,337}, {74,319}}     );
     createPoligon( {195,183,167} , {{74,333}, {78,337}, {74,370}}     );
     createPoligon( {195,183,167} , {{78,354}, {78,337}, {74,370}}     );
     createPoligon( {195,183,167} , {{78,354}, {78,377}, {74,370}}     );
     createPoligon( {195,183,167} , {{78,354}, {78,377}, {74,391}}     );
     createPoligon( {195,183,167} , {{78,429}, {78,377}, {74,391}}     );
     createPoligon( {195,183,167} , {{78,429}, {74,415}, {74,391}}     );
     createPoligon( {195,183,167} , {{78,429}, {74,415}, {74,438}}     );
     createPoligon( {195,183,167} , {{78,451}, {74,415}, {74,438}}     );
     createPoligon( {195,183,167} , {{78,451}, {74,462}, {74,438}}     );
     createPoligon( {195,183,167} , {{78,451}, {74,462}, {78,463}}     );
     createPoligon( {195,183,167} , {{74,472}, {74,462}, {78,463}}     );
     createPoligon( {195,183,167} , {{74,370}, {78,377}, {74,391}}     );
     createPoligon( {195,183,167} , {{78,429}, {74,438}, {78,451}}     );
     createPoligon( {195,183,167} , {{78,313}, {74,319}, {78,337}}     );


     createPoligon( {195,183,167} , {{119,198}, {122,198}, {119,218}}  );
     createPoligon( {195,183,167} , {{122,229}, {122,198}, {119,218}}  );
     createPoligon( {195,183,167} , {{122,229}, {119,245}, {119,218}}  );
     createPoligon( {195,183,167} , {{122,229}, {119,245}, {122,243}}  );
     createPoligon( {195,183,167} , {{119,265}, {119,245}, {122,243}}  );
     createPoligon( {195,183,167} , {{119,265}, {122,280}, {122,243}}  );
     createPoligon( {195,183,167} , {{119,265}, {122,280}, {119,299}}  );
     createPoligon( {195,183,167} , {{122,313}, {122,280}, {119,299}}  );
     createPoligon( {195,183,167} , {{122,313}, {119,324}, {119,299}}  );
     createPoligon( {195,183,167} , {{122,313}, {119,324}, {122,321}}  );
     createPoligon( {195,183,167} , {{119,338}, {119,324}, {122,321}}  );
     createPoligon( {195,183,167} , {{119,338}, {122,347}, {122,321}}  );
     createPoligon( {195,183,167} , {{119,338}, {122,347}, {122,334}}  );
     createPoligon( {195,183,167} , {{119,338}, {122,347}, {119,353}}  );
     createPoligon( {195,183,167} , {{119,366}, {122,347}, {119,353}}  );
     createPoligon( {195,183,167} , {{119,366}, {122,347}, {122,364}}  );
     createPoligon( {195,183,167} , {{119,366}, {119,380}, {122,364}}  );
     createPoligon( {195,183,167} , {{122,375}, {119,380}, {122,364}}  );


    //base(parte media)
    //                           Color RGB                Coordenadas
    //                         ------------    -----------------------------------

    createPoligon( {198,165,124} , {{74,162}, {74,198}, {110,162}}   ); //21
    createPoligon( {191,157,119} , {{110,198}, {74,198}, {110,162}}  ); //22
    createPoligon( {192,157,115} , {{110,198}, {145,198}, {110,162}} ); //23
    createPoligon( {203,171,124} , {{145,162}, {145,198}, {110,162}} ); //24
    createPoligon( {194,160,115} , {{145,162}, {145,198}, {162,198}} ); //25
    createPoligon( {176,134,77} , {{145,162}, {178,162}, {162,198}}  ); //26
    createPoligon( {184,145,92} , {{213,198}, {178,162}, {162,198}}  ); //27
    createPoligon( {188,152,103} , {{213,198}, {178,162}, {213,162}} ); //28
    createPoligon( {197,164,120} , {{213,198}, {249,198}, {213,162}} ); //29
    createPoligon( {129,97,55} , {{249,162}, {249,198}, {213,162}}   ); //30
    createPoligon( {121,92,53} , {{249,162}, {249,198}, {285,162}}   ); //31
    createPoligon( {142,108,62} , {{321,198}, {249,198}, {285,162}}  ); //32
    createPoligon( {157,119,68} , {{321,198}, {321,162}, {285,162}}  ); //33
    createPoligon( {191,157,119} , {{321,198}, {321,162}, {357,198}} ); //34
    createPoligon( {180,139,84} , {{394,162}, {321,162}, {357,198}}  ); //35
    createPoligon( {188,151,101} , {{394,162}, {431,198}, {357,198}} ); //36
    createPoligon( {197,165,122} , {{394,162}, {431,198}, {469,162}} ); //37
    createPoligon( {206,180,142} , {{469,198}, {431,198}, {469,162}} ); //38
    createPoligon( {169,129,73} , {{469,198}, {525,198}, {469,162}}  ); //39
    createPoligon( {191,157,119} , {{525,162}, {525,198}, {469,162}} ); //40


    //base(patas derecha)
    //                           Color RGB                Coordenadas
    //                         ------------    -----------------------------------
    createPoligon( {218,189,149} , {{525,162}, {558,162}, {558,174}}  ); //41
    createPoligon( {203,163,107} , {{525,162}, {525,206}, {558,174}}  ); //42
    createPoligon( {151,115,66} , {{558,206}, {525,206}, {558,174}}   ); //43
    createPoligon( {129,98,56} , {{558,206}, {525,206}, {541,223}}    ); //44
    createPoligon( {191,157,119} , {{558,206}, {558,239}, {541,223}}  ); //45
    createPoligon( {179,131,81} , {{525,206}, {558,239}, {542,239}}   ); //46
    createPoligon( {169,129,73} , {{525,206}, {525,239}, {542,239}}   ); //47
    createPoligon( {200,170,130} , {{525,272}, {525,239}, {558,239}}  ); //48
    createPoligon( {183,143,89} , {{542,255}, {558,272}, {558,239}}   ); //49
    createPoligon( {157,119,68} , {{542,255}, {558,272}, {525,272}}   ); //50
    createPoligon( {91,70,40} , {{558,305}, {558,272}, {525,272}}     ); //51
    createPoligon( {143,109,63} , {{558,305}, {525,305}, {525,272}}   ); //52
    createPoligon( {108,80,46} , {{558,305}, {525,305}, {542,321}}    ); //53
    createPoligon( {140,107,62} , {{525,338}, {525,305}, {542,321}}   ); //54
    createPoligon( {96,73,43} , {{525,338}, {539,352}, {558,305}}     ); //55
    createPoligon( {205,177,139} , {{558,371}, {539,352}, {558,305}}  ); //56
    createPoligon( {182,141,86} , {{558,371}, {525,338}, {525,371}}   ); //57
    createPoligon( {225,209,187} , {{558,371}, {525,371}, {525,404}}  ); //58
    createPoligon( {151,115,66} , {{558,437}, {543,386}, {525,404}}   ); //59
    createPoligon( {183,143,89} , {{558,437}, {543,386}, {558,371}}   ); //60
    createPoligon( {159,121,70} , {{525,470}, {542,421}, {525,404}}   ); //61
    createPoligon( {197,164,120} , {{525,470}, {542,421}, {558,437}}  ); //62
    createPoligon( {169,129,73} , {{525,470}, {558,470}, {558,437}}   ); //63

    createPoligon( {176,134,94} , {{480,198}, {495,198}, {480,224}}  ); //64
    createPoligon( {150,112,73} , {{506,198}, {495,198}, {480,224}}  ); //65
    createPoligon( {192,159,126} , {{506,198}, {498,242}, {480,224}} ); //66
    createPoligon( {167,124,82} , {{506,198}, {498,242}, {506,250}}  ); //67
    createPoligon( {137,102,67} , {{506,250}, {480,250}, {480,224}}  ); //68
    createPoligon( {172,130,87} , {{506,250}, {480,250}, {501,255}}  ); //69
    createPoligon( {155,116,77} , {{506,250}, {496,260}, {506,302}}  ); //70
    createPoligon( {159,121,70} , {{480,276}, {496,260}, {506,302}}  ); //71
    createPoligon( {225,209,187} , {{480,276}, {480,328}, {506,302}} ); //72
    createPoligon( {143,109,63} , {{506,354}, {480,328}, {506,302}}  ); //73
    createPoligon( {169,129,73} , {{506,354}, {480,328}, {485,375}}  ); //74
    createPoligon( {91,70,40} , {{480,380}, {480,328}, {485,375}}    ); //75
    createPoligon( {140,107,62} , {{480,380}, {506,354}, {506,380}}  ); //76
    createPoligon( {207,182,156} , {{480,276}, {480,250}, {501,255}} ); //77


    createPoligon( {195,183,167} , {{476,198}, {480,198}, {476,204}} );
    createPoligon( {195,183,167} , {{480,212}, {480,198}, {476,204}} );
    createPoligon( {195,183,167} , {{480,212}, {476,219}, {476,204}} );
    createPoligon( {195,183,167} , {{480,212}, {476,219}, {480,224}} );
    createPoligon( {195,183,167} , {{480,231}, {476,219}, {480,224}} );
    createPoligon( {195,183,167} , {{480,231}, {476,219}, {476,239}} );
    createPoligon( {195,183,167} , {{480,231}, {480,240}, {476,239}} );
    createPoligon( {195,183,167} , {{476,251}, {480,240}, {476,239}} );
    createPoligon( {195,183,167} , {{476,251}, {480,240}, {480,250}} );
    createPoligon( {195,183,167} , {{476,251}, {480,261}, {480,250}} );
    createPoligon( {195,183,167} , {{476,251}, {480,261}, {476,281}} );
    createPoligon( {195,183,167} , {{476,251}, {480,261}, {476,281}} );
    createPoligon( {195,183,167} , {{480,276}, {480,261}, {476,281}} );
    createPoligon( {195,183,167} , {{480,276}, {480,296}, {476,281}} );
    createPoligon( {195,183,167} , {{476,293}, {480,296}, {476,281}} );
    createPoligon( {195,183,167} , {{476,293}, {480,296}, {476,312}} );
    createPoligon( {195,183,167} , {{480,328}, {480,296}, {476,312}} );
    createPoligon( {195,183,167} , {{480,328}, {476,346}, {476,312}} );
    createPoligon( {195,183,167} , {{480,328}, {476,346}, {480,360}} );
    createPoligon( {195,183,167} , {{476,374}, {476,346}, {480,360}} );
    createPoligon( {195,183,167} , {{476,374}, {480,380}, {480,360}} );


    createPoligon( {195,183,167} , {{521,198}, {525,198}, {525,206}} );
    createPoligon( {195,183,167} , {{521,198}, {521,223}, {525,206}} );
    createPoligon( {195,183,167} , {{525,239}, {521,223}, {525,206}} );
    createPoligon( {195,183,167} , {{525,239}, {521,223}, {521,258}} );
    createPoligon( {195,183,167} , {{525,239}, {525,272}, {521,258}} );
    createPoligon( {195,183,167} , {{521,292}, {525,272}, {521,258}} );
    createPoligon( {195,183,167} , {{521,292}, {525,272}, {525,305}} );
    createPoligon( {195,183,167} , {{521,292}, {521,324}, {525,305}} );
    createPoligon( {195,183,167} , {{525,338}, {521,324}, {525,305}} );
    createPoligon( {195,183,167} , {{525,338}, {521,324}, {521,335}} );
    createPoligon( {195,183,167} , {{525,338}, {525,371}, {521,335}} );
    createPoligon( {195,183,167} , {{521,403}, {525,371}, {521,335}} );
    createPoligon( {195,183,167} , {{521,403}, {525,371}, {525,404}} );
    createPoligon( {195,183,167} , {{521,403}, {521,428}, {525,404}} );
    createPoligon( {195,183,167} , {{525,443}, {521,428}, {525,404}} );
    createPoligon( {195,183,167} , {{525,443}, {521,428}, {521,462}} );
    createPoligon( {195,183,167} , {{525,443}, {525,470}, {521,462}} );
    
}

void dibujadoManzana(){
    //                           Color RGB                Coordenadas
    //                         ------------    -----------------------------------
    createPoligon( {227,192,150} , {{101,38}, {110,33}, {122,31}}      ); //1
    createPoligon( {220,156,84} , {{134,31}, {123,48}, {122,31}}       ); //2
    createPoligon( {237,127,74} , {{101,38}, {123,48}, {122,31}}       ); //3
    createPoligon( {167,107,53} , {{101,38}, {91,52}, {110,42}}        ); //4
    createPoligon( {175,92,58} , {{101,62}, {91,52}, {110,42}}         ); //5
    createPoligon( {192,138,76} , {{101,62}, {91,52}, {88,73}}         ); //6
    createPoligon( {185,78,62} , {{101,62}, {115,74}, {88,73}}         ); //7
    createPoligon( {195,103,78} , {{92,91}, {115,74}, {88,73}}         ); //8
    createPoligon( {204,120,83} , {{92,91}, {115,74}, {118,110}}       ); //9
    createPoligon( {181,72,51} , {{92,91}, {111,118}, {118,110}}       ); //10
    createPoligon( {129,36,18} , {{130,121}, {111,118}, {118,110}}     ); //11
    createPoligon( {180,74,48} , {{130,121}, {111,118}, {143,106}}     ); //12
    createPoligon( {177,48,29} , {{130,121}, {152,121}, {146,101}}     ); //13
    createPoligon( {208,83,63} , {{165,117}, {152,121}, {146,101}}     ); //14
    createPoligon( {214,106,93} , {{165,117}, {178,107}, {146,101}}    ); //15
    createPoligon( {223,95,86} , {{146,101}, {178,107}, {172,96}}      ); //16
    createPoligon( {179,60,62} , {{163,79}, {178,107}, {192,79}}       ); //17
    createPoligon( {164,54,55} , {{146,101}, {163,79}, {172,96}}       ); //18
    createPoligon( {157,37,47} , {{133,74}, {163,79}, {142,107}}       ); //19
    createPoligon( {172,72,38} , {{133,74}, {111,118}, {143,106}}      ); //20
    createPoligon( {194,70,60} , {{133,74}, {111,118}, {115,74}}       ); //21
    createPoligon( {143,49,47} , {{101,62}, {115,74}, {110,42}}        ); //22
    createPoligon( {126,39,22} , {{123,48}, {115,74}, {110,42}}        ); //23
    createPoligon( {129,33,9} , {{123,48}, {115,74}, {133,74}}         ); //35
    createPoligon( {159,36,3} , {{123,48}, {134,31}, {133,74}}         ); //24
    createPoligon( {112,12,0} , {{149,59}, {134,31}, {133,74}}         ); //25
    createPoligon( {138,23,16} , {{133,74}, {163,79}, {159,49}}        ); //26
    createPoligon( {180,10,0} , {{183,60}, {163,79}, {159,49}}         ); //27
    createPoligon( {167,26,32   } , {{183,60}, {163,79}, {189,73}}     ); //28
    createPoligon( {209,82,89} , {{192,79}, {163,79}, {189,73}}        ); //29
    createPoligon( {201,17,25} , {{192,79}, {192,57}, {177,47}}        ); //30
    createPoligon( {233,113,115} , {{159,49}, {183,60}, {177,47}}      ); //31
    createPoligon( {255,251,245} , {{159,49}, {166,40}, {177,47}}      ); //32
    createPoligon( {227,159,146} , {{159,49}, {145,41}, {160,38}}      ); //33
    createPoligon( {255,221,209} , {{159,49}, {166,40}, {160,38}}      ); //34
    createPoligon( {194,34,10} , {{149,59}, {134,31}, {159,49}}        ); //35
    createPoligon( {223,79,53} , {{144,41}, {134,31}, {160,38}}        ); //36
    createPoligon( {181,145,67} , {{134,31}, {133,37}, {168,32}}       ); //37
    createPoligon( {219,124,102} , {{182,42}, {133,37}, {168,32}}      ); //38
    createPoligon( {215,72,68} , {{182,42}, {192,57}, {166,40}}        ); //39
    createPoligon( {109,94,75} , {{127,20}, {127,22}, {131,20}}        ); //40
    createPoligon( {114,90,26} , {{132,25}, {127,22}, {131,20}}        ); //41
    createPoligon( {148,126,53} , {{132,25}, {131,20}, {131,20}}       ); //42
    createPoligon( {114,90,26} , {{132,25}, {137,33}, {131,20}}        ); //43
    createPoligon( {101,59,21} , {{140,33}, {137,33}, {131,20}}        ); //44
    createPoligon( {175,178,73} , {{140,33}, {143,28}, {160,22}}       ); //45
    createPoligon( {117,128,8} , {{145,28}, {148,17}, {157,10}}        ); //46
    createPoligon( {119,127,15} , {{145,28}, {160,22}, {157,10}}       ); //46
    createPoligon( {108,121,7} , {{185,12}, {157,10}, {160,22}}        ); //47
    createPoligon( {66,74,0} , {{185,12}, {157,10}, {185,5}}           ); //48
    createPoligon( {88,98,1} , {{166,5}, {157,10}, {185,5}}            ); //49
    createPoligon( {87,111,1} , {{185,12}, {197,9}, {185,5}}           ); //50
    createPoligon( {102,120,0} , {{185,12}, {197,9}, {180,24}}         ); //51
    createPoligon( {112,127,0} , {{185,12}, {162,27}, {160,22}}        ); //52
    createPoligon( {124,141,1} , {{185,12}, {180,24}, {162,27}}        ); //53
    createPoligon( {101,114,0} , {{150,27}, {162,27}, {160,22}}        ); //54
}

void dibujoArbol(){
    createPoligon( {151,255,155} , {{244,15}, {256,8}, {252,20}}                        );
    createPoligon( {49,190,86} , {{256,8}, {252,20}, {271,30}, {271,15}}                );
    createPoligon( {19,125,53} , {{271,15}, {271,30}, {275,32}}                         );
    createPoligon( {103,221,124} , {{244,15}, {252,20}, {244,43}}                       );
    createPoligon( {1,153,52} , {{252,20}, {271,30}, {271,48}, {246,48}, {244,43}}      );
    createPoligon( {45,187,85} , {{271,30}, {279,35}, {284,48}, {271,48}}               );
    createPoligon( {0,146,44} , {{279,35}, {284,48}, {295,48}}                          );
    createPoligon( {153,254,152} , {{244,15}, {246,48}, {234,35}}                       );
    createPoligon( {100,221,116} , {{234,35}, {246,48}, {225,48}}                       );
    createPoligon( {182,244,181} , {{234,35}, {225,48}, {216,48}}                       );
    createPoligon( {18,159,55} , {{225,48}, {216,48}, {219,54}}                         );
    createPoligon( {101,219,122} , {{216,48}, {219,54}, {220,63}, {215,63} }            );
    createPoligon( {154,252,149} , {{240,48}, {225,48}, {219,54}, {220,63}, {236,60}}   );
    createPoligon( {50,184,85} , {{240,48}, {246,48}, {246,58}, {236,60} }              );
    createPoligon( {105,225,125} , {{246,58}, {246,48}, {251,56}}                       );
    createPoligon( {151,253,151} , {{246,48}, {251,56}, {272,52}, {271,48}}             );
    createPoligon( {104,220,119} , {{271,48}, {272,52}, {287,50}, {295,48}}             );
    createPoligon( {11,148,56} , {{215,63}, {220,63}, {226,82}}                         );
    createPoligon( {51,188,84} , {{220,63}, {226,82}, {236,60}}                         );
    createPoligon( {3,152,50} , {{236,60}, {246,58}, {248,78}, {226,82}}                );
    createPoligon( {50,189,86} , {{246,58}, {251,56}, {267,77}, {248,78}}               );
    createPoligon( {104,221,117} , {{251,56}, {272,52}, {273,76}, {266,77}}             );
    createPoligon( {157,255,154} , {{272,52}, {286,50}, {297,73}, {273,76}}             );
    createPoligon( {8,143,49} , {{286,50}, {295,48}, {297,73}}                          );
    createPoligon( {4,156,56} , {{248,78}, {267,77}, {273,85}}                          );
    createPoligon( {52,194,94} , {{267,77}, {273,76}, {273,85}}                         );
    createPoligon( {3,149,51} , {{273,76}, {273,85}, {279,84}, {297,73}}                );

    //TRONCO

    createPoligon( {216,140,104} , {{248,78}, {250,78}, {254,88}, {246,97}}             );
    createPoligon( {147,67,30} , {{251,78}, {260,80}, {253,88}}                         );
    createPoligon( {177,183,66} , {{253,88}, {260,80}, {260,96}}                        );
    createPoligon( {219,144,112} , {{253,88}, {260,104}, {265,100}, {265,96}, {260,96}} );
    createPoligon( {200,99,47} , {{253,88}, {260,104}, {255,107}, {245,99}}             );
    createPoligon( {221,145,113} , {{245,99}, {255,107}, {245,118}}                     );
    createPoligon( {152,77,38} , {{245,118}, {255,107}, {262,118}, {262,102}}           );
}

void dibujoEstrella(){
    createPoligon( {255,255,81} , {{349,2}, {334,57}, {334,38}}    );
    createPoligon( {254,233,62} , {{349,2}, {364,37}, {334,57}}    );
    createPoligon( {255,234,67} , {{334,38}, {303,47}, {334,57}}   );
    createPoligon( {255,214,2} , {{334,57}, {303,47}, {324,78}}    );
    createPoligon( {255,201,13} , {{334,57}, {324,78}, {360,80}}   );
    createPoligon( {254,218,36} , {{334,57}, {364,37}, {360,80}}   );
    createPoligon( {255,228,31} , {{364,37}, {394,47}, {360,80}}   );
    createPoligon( {255,246,79} , {{394,47}, {376,78}, {360,80}}   );
    createPoligon( {254,222,59} , {{324,78}, {360,80}, {321,117}}  );
    createPoligon( {237,174,0} , {{360,80}, {349,102}, {321,117}}  );
    createPoligon( {254,225,71} , {{360,80}, {349,102}, {377,117}} );
    createPoligon( {255,255,87} , {{360,80}, {377,117}, {376,78}}  );
}

void dibujoPlatano(){
    createPoligon( {3,136,17} , {{409,12}, {409,35}, {402,39}, {401,18}}                );
    createPoligon( {5,131,27} , {{409,35}, {402,39}, {403,52}, {412,48}}                );
    createPoligon( {249,203,68} , {{412,48}, {418,55}, {403,73}, {403,52}}              );
    createPoligon( {253,227,68} , {{403,73}, {418,55}, {436,84}}                        );
    createPoligon( {254,219,33} , {{403,73}, {436,84}, {420,99}}                        );
    createPoligon( {255,227,68} , {{418,55}, {436,84}, {452,73}}                        );
    createPoligon( {242,169,38} , {{436,84}, {420,99}, {431,104}}                       );
    createPoligon( {255,227,63} , {{436,84}, {431,104}, {456,107}, {456,73}, {452,73}}  );
    createPoligon( {254,204,43} , {{456,73}, {456,101}, {482,83}}                       );
    createPoligon( {243,201,67} , {{482,83}, {483,67}, {456,73}}                        );
    createPoligon( {255,225,70} , {{456,101}, {456,107}, {463,106}}                     );
    createPoligon( {254,193,24} , {{456,101}, {463,106}, {477,104}, {482,83}}           );
    createPoligon( {252,216,10} , {{482,83}, {483,67}, {499,65}}                        );
    createPoligon( {253,219,24} , {{482,83}, {499,65}, {509,84}, {501,92}}              );
    createPoligon( {255,225,57} , {{482,83}, {501,92}, {477,104}}                       );
    createPoligon( {253,227,70} , {{499,65}, {509,84}, {519,72}, {517,64}}              );
}
#pragma endregion

#pragma region Movimientos

//Para el mouse
double psx = 0;
double psy = 0;

////void colisionObjeto(vector<array<double,2>> &infoObjeto, int limRight, int limLeft, int limTop, int limBottom){
////    if(infoObjeto[0][0] < limRight-infoObjeto[4][0] && infoObjeto[0][0] > limLeft+infoObjeto[4][1]) {infoObjeto[1][0] *= -1; infoObjeto[2][0] *= -1;}
////}

void colisionObjeto(vector<array<double,2>> &infoObjeto){
    //Borde pantalla
    //X
    if(infoObjeto[0][0] > 800-infoObjeto[4][0] || infoObjeto[0][0] < 0+infoObjeto[4][1]) {infoObjeto[1][0] *= -1; infoObjeto[2][0] *= -1;}
    infoObjeto[0][0] += infoObjeto[1][0];
    infoObjeto[3][0] += infoObjeto[2][0];
    
    //Y
    if(infoObjeto[0][1] > 800-infoObjeto[5][0] || infoObjeto[0][1] < 0+infoObjeto[5][1]) {infoObjeto[1][1] *= -1; infoObjeto[2][1] *= -1;}
    infoObjeto[0][1] -= infoObjeto[1][1];
    infoObjeto[3][1] += infoObjeto[2][1];

    //Mesa (Esto no se completo) :(
    //colisionObjeto(infoObjeto, 658,140,336,301); //Parte Base
    //colisionObjeto(infoObjeto, 175,140,590,336); //Pata I
    //colisionObjeto(infoObjeto, 658,624,590,336); //Pata II

}


void move(int x){
    glutPostRedisplay();
    colisionObjeto(infoManzana);
    colisionObjeto(infoArbol);
    colisionObjeto(infoEstrella);
    colisionObjeto(infoPlatano);
    glutTimerFunc(15, &move, 0); //Repite el proceso
}

#pragma endregion

void graficar()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    //Instacia los poligonos
    glTranslatef(0.25,-0.4,0); //centrar la mesa
    dibujadoMesa();

    glPushMatrix(); //Para evitar que el movimiento se aplique al resto
    glScalef(0.5,0.5,0.5);
    glTranslatef(-0.7,0.53,0); //bajar la manzana
    glTranslatef(infoManzana[3][0],infoManzana[3][1],0);
    dibujadoManzana();
    glPopMatrix(); // End pushMatrix

    glPushMatrix();
    glTranslatef(0,-0.06,0);
    glTranslatef(-infoArbol[3][0], infoArbol[3][1], 0);
    dibujoArbol();
    glPopMatrix();

    glPushMatrix();
    glTranslatef(0,-0.07,0);
    glTranslatef(-infoEstrella[3][0], -infoEstrella[3][1], 0);
    dibujoEstrella();
    glPopMatrix();

    glPushMatrix();
    glTranslatef(0,-0.09,0);
    glTranslatef(infoPlatano[3][0], -infoPlatano[3][1], 0);
    dibujoPlatano();
    glPopMatrix();

    glFlush();
}

void temp(int btn, int state, int x, int y){
    psx = x;
    psy = y;
    glutPostRedisplay();
}


int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(800,800);
    glutInitWindowPosition(100,200);
    glutCreateWindow("Mesa Animación");

    inicializar();

    glutDisplayFunc(graficar);
    glutReshapeFunc(redimensionar);
    glutMouseFunc(temp);
    glutTimerFunc(15, &move, 0); //Bucle para realizar los movimentos hasta el infinito

    glutMainLoop();

    return 0;
}
